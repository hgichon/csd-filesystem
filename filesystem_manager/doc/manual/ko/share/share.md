## 4.3 공유 설정

### 4.3.1 공유 설정의 개요

클러스터 볼륨을 제공하는 공유를 설정하고 관리하는 기능입니다.

NFS/SMB 공유를 설정할 수 있습니다.

<div class="notices yellow element normal">

<strong>NFS 공유는 한 클러스터 볼륨당 하나를 권장</strong>

<ul>
    <li>클러스터 볼륨이 같으면 공유 항목이 달라도 같은 NFS 설정을 공유하므로 NFS 공유는 클러스터 볼륨당 하나의 공유만 만들기를 권장합니다.</li>
</ul>
</div>

### 4.3.2 공유 설정 기능 구성 요소

#### 4.3.2.1 공유 설정탭

* 공유 개체를 설정하고 조회합니다.
* 공유 개체는 공유 경로나 공유 대상 클러스터 볼륨 등 공유의 기본 정보를 포함하는 정보의 집합체입니다.
* 공유 개체의 서비스 프로토콜 설정에 따라 SMB 공유 탭이나 NFS 공유 탭에 나타납니다.

#### 4.3.2.2 SMB 공유탭

* SMB 공유 개체의 상세 설정을 지정하고 조회합니다.
* SMB 서비스 프로토콜을 선택한 공유 개체만 목록에 나타납니다.

#### 4.3.2.3 NFS 공유탭

* NFS 공유 개체의 상세 설정을 지정하고 조회합니다.
* NFS 서비스 프로토콜을 선택한 공유 개체만 목록에 나타납니다.

### 4.3.3 공유 설정탭

#### 4.3.3.1 공유 설정탭 구성 요소

* 공유 목록에는 공유 객체의 정보를 한 줄씩 모아서 출력합니다.
* 공유 객체의 정보는 공유 이름, 공유 설명, 상태, 경로, 볼륨, 수정 날짜, 서비스 프로토콜을 포함합니다.

| 구분 | 내용 |
| :---: | :--- |
| **공유 이름** | 공유 객체를 식별하기 위한 이름을 의미합니다.<br>사용자가 지정하는 임의의 문자열 입니다. |
| **공유 설명** | 공유 객체에 대한 설명을 나타내며 사용자가 원하는 구문을 지정할 수 있습니다. |
| **상태** | 공유 객체의 상태입니다. 정상 상태에서 "Normal" 값이 들어갑니다. |
| **경로** | 공유 객체가 클라이언트에 제공할 볼륨 내의 파일 시스템의 경로를 나타냅니다. |
| **볼륨** | 공유 객체가 클라이언트에 제공할 클러스터 볼륨을 나타냅니다. |
| **수정 날짜** | 공유 객체를 생성/수정한 시간입니다. |
| **서비스 프로토콜** | 공유 객체가 제공할 서비스 프로토콜을 나타냅니다.<br>SMB와 NFS 두 종류가 있으며 동시에 두가지를 선택할 수 있습니다. |

#### 4.3.3.2 공유 객체 생성

**공유 설정 페이지** **공유 설정** 탭의 **생성** 버튼을 클릭하여 새로운 공유 객체를 생성할 수 있습니다.

##### 4.3.3.2.1 공유 객체 정보 입력

* **[공유 이름]**
  * 공유 객체 식별을 위한 공유 객체의 이름입니다.
  * 사용자가 임의로 지정하는 문자열을 입력합니다.

* **[볼륨]**
  * 공유 객체가 공유하는 대상 볼륨을 선택합니다.
  * 볼륨은 "[2.3 볼륨 관리](#clusterVolume.xhtml#2.3 볼륨 관리)"에서 생성한 클러스터 볼륨 중 하나를 입력합니다.

* **[공유 설명]**
  * 공유 객체에 대한 설명을 나타내며 사용자가 원하는 구문을 지정할 수 있습니다.

* **[서비스]**
  * 공유 객체가 공유 공간을 어떤 프로토콜을 사용하여 클라이언트에 제공할지를 선택합니다.
  * 선택할 수 있는 프로토콜은 SMB와 NFS 두 종류이며 동시에 두 가지를 모두 선택할 수도, 선택하지 않을 수도 있습니다.
  * SMB를 선택하면 해당 공유 객체가 SMB 공유 탭에 나타납니다.
  * NFS를 선택하면 해당 공유 객체가 NFS 공유 탭에 나타납니다.

* **[공유 경로]**
  * 공유 경로를 선택 하지 않으면 볼륨의 경로로 설정 됩니다.(POSIX, ACL의 권한은 볼륨 경로의 권한을 표기 합니다.)
  * 공유 경로중 설정 하고자 하는 디렉토리 경로를 선택하면 해당 경로로 공유의 경로를 설정할 수 있습니다. (POSIX, ACL의 권한은 선택된 경로의 권한을 표기 합니다.)
  * "공유 디렉토리 생성" 버튼을 선택하면 적용 볼륨의 경로 하위의 디렉토리를 생성할 수 있습니다.

* **[POSIX 권한 설정]**
  * 선택한 공유 경로의 POSIX 권한을 표시 합니다.
  * User, Group, Other 의 권한을 표시 하고 변경할 수 있습니다.
  * "권한 변경" 버튼을 선택하면 사용자, 그룹 목록을 확인할 수 있으며 사용자, 그룹을 선택하여 "적용" 버튼을 선택하면 권한 정보를 추가할 수 있습니다.

* **[ACL 권한 설정]**
  * 선택한 공유 경로의 ACL 권한을 표시 합니다.
  * User, Group 의 권한을 표시 하고 변경할 수 있습니다.
  * "권한 변경" 버튼을 선택하면 사용자, 그룹 목록을 확인할 수 있으며 사용자, 그룹을 선택하여 "적용" 버튼을 선택하면 권한 정보를 추가할 수 있습니다.
  * 사용자, 그룹을 선택하면 "삭제" 버튼이 활성화 되고 "삭제" 버튼 선택시 선택된 사용자, 그룹을 삭제할 수 있습니다.

#### 4.3.3.3 공유 객체 수정

**공유 설정 페이지** **공유 설정** 탭의 **수정** 버튼을 클릭하여 기존 공유 객체를 변경할 수 있습니다.

##### 4.3.3.3.1 공유 객체 정보 입력
* **[공유 설정 정보]**
  * 공유의 기본 설정 정보를 수정할 수 있습니다.
  * 볼륨명, 공유 이름은 수정할 수 없습니다.
  * "공유 설명"은 공유 객체에 대한 설명을 나타내며 사용자가 원하는 구문을 지정할 수 있습니다.
  * **[서비스]**
    * 공유 객체가 공유 공간을 어떤 프로토콜을 사용하여 클라이언트에 제공할지를 선택합니다.
    * 선택할 수 있는 프로토콜은 SMB와 NFS 두 종류이며 동시에 두 가지를 모두 선택할 수도, 선택하지 않을 수도 있습니다.
    * SMB를 선택하면 해당 공유 객체가 SMB 공유 탭에 나타납니다.
    * NFS를 선택하면 해당 공유 객체가 NFS 공유 탭에 나타납니다.

* **[서비스 프로토콜]**
  * 공유에 설정된 프로토콜이 활성화 되며 각각의 프로토콜 버튼 선택시 해당 프로토콜을 수정할 수 있습니다.

* **[공유 권한 정보]**
  * 설정된 공유의 경로는 변경할 수 없습니다.
  * 설정된 공유의 하위 디렉토리 정보를 표기 합니다.
  * 공유 경로를 선택 하지 않으면 공유 디렉토리의 POSIX, ACL 정보를 표기 합니다.
  * 공유의 하위 경로를 선택하여 POSIX, ACL 권한 정보를 설정할 수 있습니다.
  * POSIX, ACL 설정은 공유 생성과 동일 합니다.

#### 4.3.3.4 공유 객체 삭제

**공유 설정 페이지** **공유 설정** 탭의 **삭제** 버튼을 클릭하여 기존 공유 객체를 삭제할 수 있습니다.

공유 객체를 여러개 선택한 후 **삭제** 버튼을 클릭하면 여러 공유 객체를 한꺼번에 삭제할 수 있습니다.

### 4.3.4 SMB 공유 설정 탭

#### 4.3.4.1 SMB 공유 설정 탭 구성 요소

* SMB 공유 목록에는 SMB 공유 객체의 기본 정보를 한 줄씩 모아서 출력합니다.
* SMB 공유 객체의 정보는 공유 이름, 공유 설명, 경로, 권한, 게스트 허용, 공유 숨김, 활성화를 포함합니다.

|  구분  |  내용  |
|  :---:  |  :---  |
| **공유 이름** | SMB 공유 객체를 식별하기 위한 이름을 의미합니다.<br>사용자가 지정하는 임의의 문자열 입니다. |
| **공유 설명** | SMB 공유 객체에 대한 설명을 나타내며 사용자가 원하는 구문을 지정할 수 있습니다. |
| **경로** | SMB 공유 객체가 클라이언트에 제공할 볼륨 내의 파일 시스템의 경로를 나타냅니다. |
| **권한** | SMB 공유에 대한 기본 접근 권한입니다. |
| **게스트 허용** | SMB 공유 객체가 'guest' 계정을 허용하는지 여부를 나타냅니다. |
| **공유 숨김** | 윈도우즈 클라이언트에서 해당 공유 조회가 가능한지 여부를 나타냅니다. |
| **활성화** | SMB 공유 객체의 활성화 여부입니다.<br>활성화 상태가 'on' 이면 해당 공유가 작동합니다. |

#### 4.3.4.2 SMB 공유 객체 수정

**공유 설정 페이지** **SMB 공유 설정** 탭의 **생성** 버튼을 클릭하여 새로운 SMB 공유 객체를 수정할 수 있습니다.

##### 4.3.4.2.1 SMB 공유 객체 기본 정보 입력

* **[접근 권한]**
  * SMB 공유 객체에 대한 기본 접근 권한을 선택합니다.
  * '읽기'나 '읽기/쓰기' 중 하나를 입력할 수 있습니다.

* **[공유 관리자]**
  * SMB 공유 객체를 관리하는 공유 관리자의 이름을 입력합니다.

* **[활성화]**
  * 해당 SMB 공유의 활성화 여부를 결정합니다.
  * [활성화]를 선택하면 SMB 공유가 활성화 되어 해당 SMB 공유가 작동합니다.

* **[게스트 허용]**
  * 해당 SMB 공유가 'guest' 계정을 허용하는지 여부를 결정합니다.
  * [게스트 허용]을 선택하면 'guest' 계정을 허용합니다.
  * 'guest' 계정이 허용되면 패스워드 입력 없이 유저를 'guest'로 지정하면 SMB 공유에 접근이 가능합니다.
  * 'guest' 계정의 SMB 접근 권한은 [접근 권한]을 따릅니다.

* **[공유 숨김 허용]**
  * 해당 SMB 공유를 윈도우즈 클라이언트에서 조회 가능하게 할지 여부를 결정합니다.
  * [공유 숨김 허용]을 선택하면 윈도우즈 클라이언트에서 해당 SMB 공유를 조회할 수 없습니다.
  * SMB 공유가 윈도우즈 클라이언트에서 보이지 않아도 주소를 입력하면 접근이 가능합니다.

##### 4.3.4.2.2 SMB 접근 사용자

* **[사용자 이름/설명]**
  * 클러스터에 존재하는 사용자의 이름과 설명입니다.
  * 나열되는 사용자의 생성/수정/삭제는 "[3.2 사용자](#account.xhtml#3.2 사용자)"나 "[3.4 외부 인증](#account.xhtml#3.4 외부 인증)"에서 수행합니다.

* **[인증]**
  * 사용자의 인증 방식을 의미합니다.
  * ADS와 Local, 두종류가 존재합니다.

* **[권한]**
  * 각 사용자에 대한 SMB 공유 접근 권한을 설정합니다.
  * 사용자 접근 권한은 'allow', 'disallow', 'readonly', 'read/write', 'deny' 중에 하나를 고를 수 있습니다.

    |  권한   |  내용  |
    |  :---:  |  :---  |
    | **allow** | 해당 사용자가 SMB 공유에 접근하는 것을 허용합니다.<br>해당 사용자의 읽기/쓰기 권한은 "[4.3.4.2.1 SMB 공유 객체 기본 정보 입력](#share.xhtml#4.3.4.2.1 SMB 공유 객체 기본 정보 입력)"의 [접근 권한]을 따릅니다. |
    | **disallow** | 해당 사용자가 SMB 공유에 접근하는 것을 제한합니다.<br>해당 사용자가 그룹에 속해 있다면<br>"[4.3.4.2.3 SMB 접근 그룹](#share.xhtml#4.3.4.2.3 SMB 접근 그룹)"에서 설정한 그룹 권한을 따릅니다. |
    | **readonly** | 해당 사용자가 SMB 공유에 접근하는 것을 허용합니다.<br>해당 사용자는 읽기 권한만 가집니다. |
    | **read/write** | 해당 사용자가 SMB 공유에 접근하는 것을 허용합니다.<br>해당 사용자는 읽기와 쓰기 권한을 모두 가집니다. |
    | **deny** | 해당 사용자가 SMB 공유에 접근하는 것을 제한합니다. |

##### 4.3.4.2.3 SMB 접근 그룹

* **[그룹 이름/설명]**
  * 클러스터에 존재하는 그룹의 이름과 설명입니다.
  * 나열되는 그룹의 생성/수정/삭제는 "[3.3 그룹](#account.xhtml#3.3 그룹)"나 "[3.4 외부 인증](#account.xhtml#3.4 외부 인증)"에서 수행합니다.

* **[인증]**
  * 그룹의 인증 방식을 의미합니다.
  * ADS와 Local, 두 종류가 존재합니다.

* **[권한]**
  * 각 그룹에 대한 SMB 공유 접근 권한을 설정합니다.
  * 그룹 접근 권한은 'allow', 'disallow', 'readonly', 'read/write', 'deny' 중에 하나를 고를 수 있습니다.

    |  권한   |  내용  |
    |  :---:  |  :---  |
    | **allow** | 해당 그룹에 속한 사용자들이 SMB 공유에 접근하는 것을 허용합니다.<br>사용자의 읽기/쓰기 권한은 "[4.3.4.2.1 SMB 공유 객체 기본 정보 입력](#share.xhtml#4.3.4.2.1 SMB 공유 객체 기본 정보 입력)"의 [접근 권한]을 따릅니다. |
    | **disallow** | 해당 그룹에 속한 사용자들이 SMB 공유에 접근하는 것을 제한합니다. |
    | **readonly** | 해당 그룹에 속한 사용자들이 SMB 공유에 접근하는 것을 허용합니다.<br>사용자는 읽기 권한만 가집니다. |
    | **read/write** | 해당 그룹에 속한 사용자들이 SMB 공유에 접근하는 것을 허용합니다.<br>사용자는 읽기와 쓰기 권한을 모두 가집니다. |
    | **deny** | 해당 그룹에 속한 사용자들이 SMB 공유에 접근하는 것을 제한합니다. |


##### 4.3.4.2.4 SMB 보안 설정

* **[Zone 이름/허용 주소]**
  * 클러스터에 존재하는 보안 영역의 이름과 보안 영역이 포함하는 주소입니다.
  * 나열되는 Zone의 생성/삭제는 "[1.5.4 네트워크 영역 설정](#cluster.xhtml#1.5.4 네트워크 영역 설정)"에서 수행합니다.

* **[권한]**
  * 각 Zone에 대한 SMB 공유 접근 권한을 설정합니다.
  * Zone 접근 권한은 'allow', 'disallow', 'deny' 중에 하나를 고를 수 있습니다.

    |  권한   |  내용  |
    |  :---:  |  :---  |
    | **allow** | 해당 보안 영역에 해당하는 클라이언트가 SMB 공유에 접근하는 것을 허용합니다. |
    | **disallow** | 해당 보안 영역에 해당하는 클라이언트가 SMB 공유에 접근하는 것을 제한합니다. |
    | **deny** | 해당 보안 영역에 해당하는 클라이언트가 SMB 공유에 접근하는 것을 제한합니다. |

* 예를 들어 "1.2.3.4" IP를 포함하는 보안 영역의 권한을 "deny"로 주면 "1.2.3.4" IP에서 오는 요청들을 차단합니다.

### 4.3.5 NFS 공유 설정탭

#### 4.3.5.1 NFS 공유 설정탭 구성 요소

* NFS 공유 목록에는 NFS 공유 객체의 기본 정보를 한 줄씩 모아서 출력합니다.
* NFS 공유 객체의 정보는 공유 이름, 공유 설명, 경로, 활성화를 포함합니다.

|  구분  |  내용  |
|  :---:  |  :---  |
| **공유 이름** | NFS 공유 객체를 식별하기 위한 이름을 의미합니다.<br>사용자가 지정하는 임의의 문자열 입니다. |
| **공유 설명** | NFS 공유 객체에 대한 설명을 나타내며 사용자가 원하는 구문을 지정할 수 있습니다. |
| **경로** | NFS 공유 객체가 클라이언트에 제공할 볼륨 내의 파일 시스템의 경로를 나타냅니다. |
| **활성화** | NFS 공유 객체의 활성화 여부입니다.<br>활성화 상태가 'on' 이면 해당 공유가 작동합니다. |

#### 4.3.5.2 NFS 공유 객체 수정

**공유 설정 페이지** **NFS 공유 설정** 탭의 **생성** 버튼을 클릭하여 새로운 NFS 공유 객체를 수정할 수 있습니다.

##### 4.3.5.2.1 NFS 공유 객체 기본 정보 입력

* **[활성화]**
  * 해당 NFS 공유의 활성화 여부를 결정합니다.
  * [활성화]를 선택하면 NFS 공유가 활성화 되어 해당 NFS 공유가 작동합니다.

##### 4.3.5.2.2 NFS 보안 설정

* **[Zone 이름/허용 주소]**
  * 클러스터에 존재하는 보안 영역의 이름과 보안 영역이 포함하는 주소입니다.
  * 나열되는 Zone의 생성/삭제는 "[1.5.4 네트워크 영역 설정](#cluster.xhtml#1.5.4 네트워크 영역 설정)"에서 수행합니다.

* **[권한]**
  * 각 Zone에 대한 NFS 공유 접근 권한을 설정합니다.
  * Zone 접근 권한은 'disallow', 'readonly', 'read/write' 중에 하나를 고를 수 있습니다.

    |  권한   |  내용  |
    |  :---:  |  :---  |
    | **allow** | 해당 보안 영역에 해당하는 클라이언트가 NFS 공유에 접근하는 것을 허용합니다. |
    | **disallow** | 해당 보안 영역에 해당하는 클라이언트가 NFS 공유에 접근하는 것을 제한합니다. |
    | **deny** | 해당 보안 영역에 해당하는 클라이언트가 NFS 공유에 접근하는 것을 제한합니다. |

  * 예를 들어 "1.2.3.4" IP를 포함하는 보안 영역의 권한을 "deny"로 주면 "1.2.3.4" IP에서 오는 요청들을 차단합니다.

* **[NoRootSquashing]**
  * 클라이언트의 root와 NFS 서버의 root를 동일시할지 여부를 결정합니다.
  * [NoRootSquashing]이 'on'이면 클라이언트의 root가 NFS 공유가 제공하는 공유 공간에서도 root 권한을 가집니다.

* **[Insecure]**
  * Internet port(~1024)를 허용할지 여부를 결졍합니다.
  * [Insecure]가 'on'이면 Internet port(~1024)를 허용합니다.
