## 기본 점검 사항

NFS/SMB 서비스 또는 클러스터 관리에 문제가 발생시 기본적으로 먼저 점검하는 사항입니다.

대부분의 하드웨어 오류는 AnyStor-E 관리 소프트웨어에서 감지되고 경고 알림을 발생시킵니다.

이 장에서 언급되지 않는 부분은 하드웨어 상태 점검을 참고하세요.

## 1. 기본 네트워크 구성 점검

AnyStor-E 클러스터 관리자에 접속이 문제가 있거나 클라이언트에서 입출력이 정상 동작되지 않는 원인은 다양합니다.

본 챕터에서는 기본적인 환경 구성을 점검합니다.

* 네트워크 정상 동작 확인

| 점검 요소          | 점검 방법              |  관련 내용  |
| :----------:       | :----------:           | :---------- |
| ICMP 통신 확인     | ping 등의 도구로 통신 확인 | 사용 중인 클라이언트에서 클러스터 관리 또는 서비스 IP로 통신이 되는지 확인합니다. |
| 클러스터 포트 확인 | nmap/telnet 등의 도구로 통신 확인 | 접속하고자 하는 클러스터 포트 (HTTP:80, NFS:2049, 111, 38465, SMB: 139, 445)가 방화벽에서 열려있는지 확인합니다. |

## 2. 소프트웨어 상태 점검

클러스터의 상태 점검은 "[1.2 오버뷰](#cluster.xhtml#1.2 오버뷰)"를 통해서 확인하며, 각 노드별 세부 상태는 "[5.2.3 노드 정보표](#node.xhtml#5.2.3 노드 정보표)" 를 통해 확인하실 수 있습니다.

* 클러스터 관리자를 통한 상태 점검

| 점검 요소 | 점검 방법 | 관련 내용 |
| :-------: | :-------: | :-------- |
| 클러스터 전체 상태 | 클러스터 관리 >> 오버뷰 >> 노드 현황 | 클러스터 전체 및 참여 노드의 하드웨어 및 소프트웨어의 경고 및 오류 상태가 발생할 때 상태 값이 바뀌게 됩니다. 관련 장애는 본 가이드의 **대시보드 모니터링**을 확인하세요. |
| 클러스터 노드 상태 | 노드 관리 >> 노드별 현황 | 모니터링하는 자원의 종류와 상태를 확인할 수 있습니다. |
| 이벤트/태스크 | 클러스터 관리 >> 이벤트 | 클러스터에 발생한 하드웨어 및 소프트웨어 자원의 장애 또는 주의가 필요한 작업이 어떤 것들이 있는지 확인할 수 있습니다. |

## 3. 하드웨어 상태 점검

하드웨어 점검은 제조사 및 모델에 따라 다양한 점검 방법이 있으며, 본 매뉴얼에서는 기본적인 내용을 기술합니다. 자세한 사항은 **하드웨어 제조사 매뉴얼**을 확인하세요.

클러스터 관리자를 통한 상태 점검에서 확인되지 않는 시스템 이벤트를 확인하는데 도움을 줄 수 있습니다.

* 시스템 외관 점검 (LED 및 알람)

| 점검 요소 | 점검 방법 | 관련 내용 |
| :-------: | :-------: | :-------- |
| NIC 카드 LED | NIC LED를 육안으로 확인 | LED가 꺼져 있거나 스위치와의 협상이 잘못된 경우, 잠재적인 카드 및 스위치 포트의 오류를 의심해볼 수 있습니다. |
| 디스크/백플레인 LED | 디스크/백플레인의 LED를 육안으로 확인 | LED가 빨간색인 경우, 디스크가 장애가 발생했을 가능성이 높습니다. RAID 구성이 없는 경우 해당 디스크가 포함된 파일 시스템 접근이 불가능할 수도 있습니다. |
| RAID 컨트롤러 | 비프음 청취, 시스템 부팅 메시지 | 경고 상황이 발생한 경우, RAID 컨트롤러에서 (지원한다면) 비프음이 울리게 됩니다. |
| 시스템 LED | 시스템 패널 전면 LED 육안 확인 | CPU/메모리/전압/온도/팬 속도와 같은 하드웨어 상태가 정상이 아닌 경우, LED 상태가 빨간색 및 점멸이 되며 (지원한다면), 향후 시스템 장애를 유발할 수 있습니다. |

* 시스템 내부 점검 (SSH/콘솔)

| 점검 요소 | 점검 방법 | 관련 내용 |
| :-------: | :-------: | :-------- |
| IPMI 센서 데이터 | ipmitool 등의 IPMI 유틸리티 | (제조사에서 지원한다면) 시스템에 장착된 하드웨어 상태를 IPMI 도구로 점검하며, 하드웨어 오류를 점검할 수 있습니다. |
| MCE 로그 | mcelog 등의 MCE 유틸리티 | CPU가 리포트한 MCE(Machine Check Event)를 확인하여, 시스템 오류를 분석할 수 있습니다. 갑작스런 시스템 재시작 등의 상황에서 원인을 찾는 것에 도움을 줄 수 있습니다. |
| RAID 컨트롤러 | 비프음 청취, 시스템 부팅 메시지 | 경고 상황이 발생한 경우, RAID 컨트롤러에서 (지원한다면) 비프음이 울리게 됩니다. |
| 시스템 LED | 시스템 패널 전면 LED 육안 확인 | CPU/메모리/전압/온도/팬 속도와 같은 하드웨어 상태가 정상이 아닌 경우, LED 상태가 빨간색 및 점멸이 되며 (지워한다면), 향후 시스템 장애를 유발할 수 있습니다. |
