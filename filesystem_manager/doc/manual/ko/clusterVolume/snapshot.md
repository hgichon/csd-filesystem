## 2.4 스냅샷 관리

### 2.4.1 스냅샷 관리 기능 개요

동적 할당 클러스터 볼륨에 수동 스냅샷 생성/스냅샷 생성 스케줄링을 설정합니다.

<div class="notices info element normal">

<strong>스냅샷</strong>

<ul>
    <li>스냅샷은 특정 시점의 볼륨 이미지를 저장하는 기술로, 데이터의 삭제 또는 변조등으로 인해 과거 시점의 파일에 접근할 수 있는 기능입니다.</li>
    <li>스냅샷 스케줄러를 사용하여 스냅샷 생성 및 로테이트를 손쉽게 사용하실 수 있습니다.</li>
</ul>
</div>

<div class="notices yellow element normal">

<strong>스냅샷 사용 시 주의사항</strong>

<ul>
    <li>스냅샷 기능은 동적 할당 클러스터 볼륨에 한해서 활성화됩니다.</li>
    <li>볼륨 당 생성할 수 있는 스냅샷 수는 **255**입니다.</li>
    <li>과도한 I/O 발생과 같은 시스템 상황에 따라 지정된 타임아웃을 초과하는 경우 스냅샷 생성 취소될 수 있습니다.</li>
    <li>클러스터 볼륨을 리밸런싱하는 중에는 스냅샷 생성을 할 수 없습니다.</li>
</ul>
</div>

### 2.4.2 스냅샷 스케줄 조회

클러스터 볼륨별 스냅샷 스케줄 목록과 수동으로 생성된 스냅샷 목록을 확인할 수 있습니다.

| 구분 | 설명 |
| ---- | ---- |
| 볼륨 명 | 스냅샷을 생성할 클러스터 볼륨 명입니다. |
| 스케줄링 명 | 설정된 스케줄링의 이름입니다. 수동으로 생성된 스냅샷은 **수동 스냅샷**으로 출력됩니다. |
| 반복 주기 | 스냅샷을 생성할 반복 주기 값이 출력됩니다. [2.4.3 스냅샷 스케줄링 생성](#clusterVolume.xhtml#2.4.3 스냅샷 스케줄링 생성)을 참조하세요. |
| 다음 실행 시간 | 스냅샷 스케줄링을 시도할 날짜와 시간이 출력됩니다. |
| 마지막 실행 시간 | 이전 스냅샷 스케줄링 수행 날짜와 시간이 출력됩니다. |
| 마지막 실행 상태 | 이전 스케줄링의 스냅샷 생성 여부가 출력됩니다. <ul><li>**OK** - 스냅샷 생성 성공</li><li>**ERROR** - 스냅샷 생성 실패</li></ul> |
| 시작 날짜 | 스케줄링이 스냅샷 자동 생성을 시작할 날짜가 출력됩니다. |
| 종료 날짜 | 스케줄링이 스냅샷 자동 생성을 중지할 날짜가 출력됩니다. |
| 활성화 | 스케줄링 동작 여부가 출력됩니다. 비활성화 시 스냅샷 생성을 시도하지 않습니다. <ul><li>**enable** - 스케줄링 활성화</li><li>**disable** - 스케줄링 비활성화</li></ul> |
| 스냅샷 개수 | 스케줄링이 현재까지 생성한 스냅샷의 총 개수입니다. |
| 동작 | 스케줄링의 추가적인 작업을 수행할 수 있습니다. <ul><li>**상세보기** - 클러스터 볼륨의 스냅샷을 관리할 수 있습니다.</li><li>**변경** - 스케줄링 설정을 변경할 수 있습니다.</li><li>**삭제** - 스케줄링을 제거할 수 있습니다.</li></ul> |

**동작**

스냅샷 스케줄인 경우 상세보기, 변경, 삭제 버튼이 출력되고, 수동 스냅샷인 경우 상세보기 버튼만 출력됩니다.

#### 2.4.2.1 스냅샷 관리

**동작**의 **상세보기** 버튼을 클릭하여 클러스터 볼륨별 수동/스케줄링으로 생성된 스냅샷을 관리합니다.

|  구분 	|  설명  |
| ------	| ------ |
| 스냅샷 명	| 스냅샷 명은 생성 시 요청된 이름과 그리니치 평균시로 변환된 생성 시간으로 구성됩니다.<br>스냅샷 스케줄러에 의해 생성된 스냅샷의 경우 <code>"auto"</code>라는 이름으로 생성됩니다. |
| 노드		| 스냅샷 생성 당시 클러스터 볼륨을 구성하고 있는 노드들의 목록입니다. |
| 상태		| 스냅샷의 상태가 출력됩니다. |
| 생성 일자	| 웹 브라우저 기반 시간대로 변환된 스냅샷 생성 시간입니다. |
| 활성화	| 스냅샷 활성화 여부가 출력됩니다. [2.4.2.1.1 스냅샷 활성화/비활성화](#clusterVolume.xhtml#2.4.2.1.1 스냅샷 활성화/비 활성화)을 참조하세요. |
| 동작		| 스냅샷에 대한 추가적인 작업을 수행할 수 있습니다.<ul><li>**삭제** - 선택된 스냅샷을 삭제합니다.</li><li>**활성화/비활성화** - 스냅샷의 활성화 상태를 변경합니다.</li></ul> |

##### 2.4.2.1.1 스냅샷 활성화/비 활성화

[2.4.2.1 스냅샷 관리](#clusterVolume.xhtml#2.4.2.1 스냅샷 관리)의 **동작** **활성화** 또는 **비활성화** 버튼을 클릭하여 해당 스냅샷을 사용하실 수 있습니다.

해당 스냅샷이 활성화된 경우에만 클라이언트가 스냅샷 데이터에 접근할 수 있게 됩니다.

##### 2.4.2.1.2 스냅샷 삭제

[2.4.2.1 스냅샷 관리](#clusterVolume.xhtml#2.4.2.1 스냅샷 관리) **동작**의 **삭제** 버튼을 클릭하여 스냅샷을 삭제할 수 있습니다.

<div class="notices blue element normal">

<strong>클라이언트의 스냅샷 접근 경로</strong>

<ul>
    <li><code>&lt;MOUNT_DIR&gt;/.snaps/&lt;ACTIVATED_SNAPSHOT_NAME&gt;*</code></li>
</ul>
</div>

#### 2.4.2.2 스냅샷 스케줄링 변경

**동작**의 **변경** 버튼을 클릭하여 생성되어 있는 스케줄링의 설정 값을 변경합니다.

설정 값의 대한 설명은 [2.4.3 스냅샷 스케줄링 생성](#clusterVolume.xhtml#2.4.3 스냅샷 스케줄링 생성)과 동일합니다.

<div class="notices yellow element normal">

<ul>
    <li>설정 값 변경 시, <strong>볼륨 명, 스케줄링 명</strong> 값은 변경할 수 없습니다.</li>
    <li>설정 값 변경 시, 스케줄링을 수행할 <strong>다음 실행 시간</strong>은 변경된 설정 값 기준으로 다시 계산됩니다.</li>
</ul>
</div>

#### 2.4.2.3 스냅샷 스케줄링 삭제

**동작**의 **삭제** 버튼을 크릭하여 생성되어 있는 스케줄링을 삭제합니다.

<div class="notices yellow element normal">
<ul>
    <li>스케줄링 삭제 시, 스케줄링에 의해 생성된 스냅샷들은 삭제되지 않습니다.</li>
</ul>
</div>

### 2.4.3 스냅샷 스케줄링 생성

페이지의 좌측 상단 **스냅샷 스케줄링 생성** 버튼을 클릭하여 스케줄링을 설정할 수 있습니다.

**스냅샷 스케줄링 생성 팝업창**의 좌측 반복 주기 설정 값으로 다양한 스케줄링 시간을 설정할 수 있습니다.

스케줄링 반복 주기를 시단위, 일단위, 주단위, 월단위로 설정할 수 있습니다.

<table>
<caption>공통 설정 값</caption>
<thead>
    <tr>
        <th>구분</th>
        <th>설명</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>스케줄링 명</td>
        <td>생성할 스케줄링의 이름입니다. <br>영문으로 시작하는 4~20 글자를 입력하세요. 특수문자는 <code>"-", "_"</code>만 허용하고 있습니다.</td>
    </tr>
    <tr>
        <td>볼륨 명</td>
        <td>스냅샷을 생성할 클러스터 볼륨 이름입니다.</td>
    </tr>
    <tr>
        <td>시작 날짜 </td>
        <td>스케줄링이 스냅샷 자동 생성을 시작할 날짜를 설정합니다. 기본 값은 현재 날짜입니다.</td>
    </tr>
    <tr>
        <td>종료 날짜 </td>
        <td>스케줄링이 스냅샷 자동 생성을 중지할 날짜를 설정합니다.</td>
    </tr>
    <tr>
        <td>최대 생성 스냅샷 개수</td>
        <td>스케줄링이 생성할 수 있는 최대 스냅샷 수를 설정합니다.<br>해당 값을 초과하는 스냅샷 생성 시 오래된 스냅샷부터 삭제됩니다. <br>동일 클러스터 볼륨에 설정된 스케줄링들의 최대 생성 스냅샷 개수의 총 합은 255개를 초과할 수 없습니다.</td>
    </tr>
    <tr>
        <td>스케줄링 활성화 </td>
        <td>스케줄링 동작 여부를 설정할 수 있습니다. 비활성화 시 스냅샷 생성을 시도하지 않습니다.</td>
    </tr>
    <tr>
        <td>스냅샷 활성화</td>
        <td>스냅샷 생성 시 활성화 상태로 변경합니다. <a href="#clusterVolume.xhtml#2.4.2.1.1 스냅샷 활성화/비 활성화">2.4.2.1.1 스냅샷 활성화/비활성화</a>를 참조하세요.</td>
    </tr>
</tbody>
</table>

##### 2.4.3.1 시단위 스냅샷 스케줄링 생성

매일 지정된 시각에 스냅샷을 생성하는 스케줄링을 설정합니다.

[2.4.3 스냅샷 스케줄링 생성](#clusterVolume.xhtml#2.4.3 스냅샷 스케줄링 생성)의 공통 설정에 대한 설명을 참조하세요.

| 구분 | 설명 |
| ---- | ---- |
| 수행 시각 | 스냅샷을 생성할 시각을 00 ~ 23시까지 설정할 수 있습니다. |

##### 2.4.3.2 일단위 스냅샷 스케줄링 생성

지정 일수마다 스냅샷을 생성하는 스케줄링을 설정합니다.

해당 스케줄링 수행일의 지정 시각에 스냅샷이 생성됩니다.

[2.4.3 스냅샷 스케줄링 생성](#clusterVolume.xhtml#2.4.3 스냅샷 스케줄링 생성)의 공통 설정에 대한 설명을 참조하세요.

| 구분 | 설명 |
| ---- | ---- |
| 반복 간격 | 몇일마다 스케줄링을 반복 수행할지 설정할 수 있습니다. |
| 수행 시각 | 해당 일자 내 스냅샷을 생성할 시각을 00 ~ 23시까지 설정할 수 있습니다. |

##### 2.4.3.3 주단위 스냅샷 스케줄링 생성

지정된 주마다 스냅샷을 생성하는 스케줄링을 설정합니다.

해당 주간의 지정된 요일, 시각에 스냅샷이 생성됩니다.

[2.4.3 스냅샷 스케줄링 생성](#clusterVolume.xhtml#2.4.3 스냅샷 스케줄링 생성)의 공통 설정에 대한 설명을 참조하세요

| 구분 | 설명 |
| ---- | ---- |
| 반복 간격 | 몇주마다 스케줄링을 반복 수행할지 설정할 수 있습니다. |
| 수행 요일 | 해당 주간 내 스케줄링을 수행할 요일을 세부 설정할 수 있습니다. |
| 수행 시각 | 해당 일자 내 스냅샷을 생성할 시각을 00 ~ 23시까지 설정할 수 있습니다. |

##### 2.4.3.4 월단위 스냅샷 스케줄링 생성

지정된 개월 수마다 스냅샷을 생성하는 스케줄링을 설정합니다.

해당 월의 지정 주간 내 요일, 시각에 스냅샷이 생성됩니다.

[2.4.3 스냅샷 스케줄링 생성](#clusterVolume.xhtml#2.4.3 스냅샷 스케줄링 생성) 의 공통 설정에 대한 설명을 참조하세요.

| 구분 | 설명 |
| ---- | ---- |
| 반복 간격 | 몇 개월마다 스케줄링을 반복 수행할지 설정할 수 있습니다. |
| 수행 주간 | 해당 개월 내 스케줄링을 수행할 주간을 세부 설정할 수 있습니다. |
| 수행 요일 | 해당 주간 내 스케줄링을 수행할 요일을 세부 설정할 수 있습니다. |
| 수행 시각 | 해당 일자 내 스냅샷을 생성할 시각을 00 ~ 23시까지 설정할 수 있습니다. |

### 2.3.4 수동 스냅샷 생성

페이지의 좌측 상단 **수동 스냅샷 생성** 버튼을 클릭하여 클러스터 볼륨의 스냅샷을 생성할 수 있습니다.

| 구분  |  설명  |
| ----- | ------ |
| 볼륨 명 | 스냅샷을 생성할 클러스터 볼륨을 설정합니다. |
| 스냅샷 명 | 생성될 스냅샷의 이름을 설정합니다. |
| 수동 생성 가능한 스냅샷 개수 | 볼륨 당 생성할 수 있는 스냅샷 개수는 **255**개 입니다. |
